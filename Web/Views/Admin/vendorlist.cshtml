
@{
    ViewBag.Title = "vendorlist";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}



<style>
    :root {
        --primary-green: #177e3f;
        --primary-hover: #125e30;
        --light-green: #e8f5ed;
        --border-radius: 16px;
    }

    table thead tr th {
        background-color: var(--primary-green) !important;
        color: white !important;
        text-align: center !important;
    }

    td {
        text-align: center !important;
    }

    .switch {
        position: relative;
        display: inline-block;
        width: 45px;
        height: 24px;
    }

        .switch input {
            display: none;
        }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 24px;
    }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

    input:checked + .slider {
        background-color: #28a745;
    }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

    menu, ol, ul {
        margin: -7px 0;
        padding: 0 0 0 17px;
    }

    .dataTables_empty {
        display: none;
    }



    .form-control, .form-select {
        height: 38px !important;
    }

    ::placeholder {
        color: lightgray !important;
    }

    .bottom {
        margin: 10px 0px;
    }

    .previous {
        margin: 0px 10px;
        border: 1px solid var(--primary-green);
        font-weight: bold;
        padding: 3px;
        border-radius: 3px;
    }

    .next {
        margin: 0px 10px;
        border: 1px solid var(--primary-green);
        font-weight: bold;
        padding: 3px;
        border-radius: 3px;
    }
</style>

@model IEnumerable<Kaasht_Kart.Models.vendermodel>

<div class="card-header bg-success text-white py-3 rounded-top-4">
    <h4 class="mb-0 fw-bold">Vendor List</h4>
</div>

<div class="container mt-4">
    <div class="card shadow-sm border-0 rounded-4">


        <div class="card-body p-3">
            <table class="table table-hover table-bordered align-middle mydatatable">
                <thead style="background:#177e3f; color:white;">
                    <tr>
                        <th>Status</th>
                        <th>Company Name</th>
                        <th>Email</th>
                        <th>Address</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var v in Model)
                    {
                        <tr class="border">
                            <!-- Toggle -->
                            <td class="text-center">
                                <label class="switch mt-1">
                                    <input type="checkbox" class="vendorStatusToggle"
                                           data-id="@v.VendorId" @(v.Status ? "checked" : "")>
                                    <span class="slider round"></span>
                                </label>
                            </td>

                            <!-- Logo -->
                            <td class="text-center"> @v.BranchName</td>

                            <!-- Company Name -->
                            <td>
                                <h6 class="fw-bold mb-0">@v.VendorName</h6>
                                <p class="text-secondary small mb-0">@v.AuthEmail</p>
                            </td>

                            <!-- Address -->
                            <td class="text-secondary">@v.RegisteredAddress</td>

                            <!-- Status -->
                            <td>
                                @if (v.Status)
                                {
                                    <span class="badge bg-success px-3 py-2">Active</span>
                                }
                                else
                                {
                                    <span class="badge bg-danger px-3 py-2">Inactive</span>
                                }
                            </td>

                            <!-- Actions -->
                            <td>
                                @if (v.Status)
                                {
                                    <a href="/Admin/vendordetails?vendorId=@v.VendorDbId"
                                       class="btn btn-success btn-sm fw-bold w-100">
                                        <i class="fa fa-eye"></i> Details
                                    </a>
                                }
                                else
                                {
                                    <button class="btn btn-outline-dark btn-sm w-100 viewVendorBtn p-3 rounded fs-5"
                                            @*data-logo="@logoImg"*@
                                            data-name="@v.AuthFullName"
                                            data-email="@v.AuthEmail"
                                            data-address="@v.RegisteredAddress"
                                            data-person="@v.AuthFullName"
                                            data-phone="@v.AuthMobile"
                                            data-altphone="@v.AuthAltMobile"
                                            data-gst="@v.GSTNumber"
                                            @*data-gstfile="@v.GSTFilePath"*@>

                                        <i class="fa fa-eye"></i> Details
                                    </button>

                                }
                            </td>

                        </tr>
                    }
                </tbody>

            </table>
        </div>
    </div>
</div>


<!-- jQuery (must load first) -->
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>

<!-- DataTables Core -->
<link href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/2.1.8/js/dataTables.min.js"></script>

<!-- DataTables Buttons -->
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.1.2/css/buttons.dataTables.css">
<script src="https://cdn.datatables.net/buttons/3.1.2/js/dataTables.buttons.js"></script>
<script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.dataTables.js"></script>

<!-- Export Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.print.min.js"></script>
<script>
    $(document).ready(function () {

        new DataTable('.mydatatable', {
            paging: true,
            searching: true,
            scrollX: true,
            fixedHeader: true,
            ordering: false,

            language: {
                searchPlaceholder: "Search here...",
                search: "",
            },

            dom: '<"top d-flex justify-content-between"lfB>rt<"bottom d-flex justify-content-between mt-2"ip>',

            buttons: [
                {
                    extend: 'excelHtml5',
                    text: 'Export Excel',
                    className: 'btn btn-success btn-sm fw-bold'
                },
                {
                    extend: 'pdfHtml5',
                    text: 'Export PDF',
                    className: 'btn btn-danger btn-sm fw-bold',
                    orientation: 'landscape',
                    pageSize: 'A4'
                }
            ]
        });

    });

    $(document).on("click", ".viewVendorBtn", function () {

        $("#vLogo").attr("src", $(this).data("logo"));
        $("#vName").text($(this).data("name"));
        $("#vEmail").text($(this).data("email"));
        $("#vAddress").text($(this).data("address"));
        $("#vPerson").text($(this).data("person"));
        $("#vPhone").text($(this).data("phone"));
        $("#vAltPhone").text($(this).data("altphone"));
        $("#vGSTNo").text($(this).data("gst"));

        let gstFile = $(this).data("gstfile");

        if (gstFile && gstFile !== "") {
            $("#vGSTFile").html(`
                <a href="/Content/VendorDocs/GST/${gstFile}"
                   class="btn btn-warning btn-sm" target="_blank">
                    <i class="fa fa-file-pdf"></i> View GST File
                </a>`);
        } else {
            $("#vGSTFile").html(`<span class="text-danger">No File Uploaded</span>`);
        }

        $("#vendorDetailsModal").modal("show");
    });
</script>
